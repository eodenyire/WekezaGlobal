# Default values for wgi Helm chart.
# Override these values at deploy time.

global:
  imageRegistry: ghcr.io
  imageRepository: eodenyire/wekezaglobal
  imagePullPolicy: Always
  namespace: wgi

# ─── Backend ─────────────────────────────────────────────────────────────────
backend:
  enabled: true
  image:
    tag: latest
  replicaCount: 2
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
  service:
    type: ClusterIP
    port: 3001
  env:
    NODE_ENV: production
    PORT: "3001"
    JWT_EXPIRY: "3600"
    FX_FEE_RATE: "0.005"
    RATE_LIMIT_WINDOW_SECONDS: "900"
    RATE_LIMIT_MAX_REQUESTS: "100"
  # Secrets are injected from an existing Secret named wgi-backend-secrets
  existingSecret: wgi-backend-secrets

# ─── Frontend ─────────────────────────────────────────────────────────────────
frontend:
  enabled: true
  image:
    tag: latest
  replicaCount: 2
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "200m"
      memory: "128Mi"
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 6
    targetCPUUtilizationPercentage: 70
  service:
    type: ClusterIP
    port: 80
  buildArgs:
    REACT_APP_API_URL: "https://api.wekeza.global"

# ─── Ingress ──────────────────────────────────────────────────────────────────
ingress:
  enabled: true
  className: nginx
  tls: true
  certIssuer: letsencrypt-prod
  hosts:
    api: api.wekeza.global
    app: wekeza.global

# ─── Monitoring ───────────────────────────────────────────────────────────────
monitoring:
  enabled: true
  prometheus:
    scrape: true
    port: 3001
    path: /metrics
